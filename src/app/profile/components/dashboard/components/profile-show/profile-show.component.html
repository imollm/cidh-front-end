<div id="userprofile-page">
  <div class="container">
    <div class="row">
      <div class="col-sm-10 offset-sm-1 form-content-wrapper">
        <h1 class="form-title h4 m-5 text-center">
          {{ formTitle }}
        </h1>
        <form class="" [formGroup]="form" (ngSubmit)="onSubmit()">
          <div class="mb-3 row">
            <label for="inputName" class="col-sm-3 col-form-label text-sm-end">Nom</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputName" placeholder="Nom" formControlName="firstName"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('firstName').invalid, 'is-valid': form.get('firstName').valid }" />
              <div *ngIf="form.get('firstName').invalid && 
                                  form.get('firstName').errors && 
                                  (form.get('firstName').dirty || form.get('firstName').touched)">
                <small class="text-danger" *ngIf="form.get('firstName').hasError('required')">
                  El nom es obligatori.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputSurname" class="col-sm-3 col-form-label text-sm-end">Cognom</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputSurname" placeholder="Cognom" formControlName="lastName"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('lastName').invalid, 'is-valid': form.get('lastName').valid }" />
              <div *ngIf="form.get('lastName').invalid && 
                                  form.get('lastName').errors && 
                                  (form.get('lastName').dirty || form.get('lastName').touched)">
                <small class="text-danger" *ngIf="form.get('lastName').hasError('required')">
                  El cognom es obligatori.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputFiscalId" class="col-sm-3 col-form-label text-sm-end">Nif</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputFiscalId" placeholder="Nif" formControlName="fiscalId"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('fiscalId').invalid, 'is-valid': form.get('fiscalId').valid }" />
              <div *ngIf="form.get('fiscalId').invalid && 
                                    form.get('fiscalId').errors && 
                                    (form.get('fiscalId').dirty || form.get('fiscalId').touched)">
                <small class="text-danger" *ngIf="form.get('fiscalId').hasError('required')">
                  El id fiscal es obligatori.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputEmail" class="col-sm-3 col-form-label text-sm-end">Email</label>
            <div class="col-sm-8">
              <input type="email" class="form-control" id="inputEmail" placeholder="Email" formControlName="email"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('email').invalid, 'is-valid': form.get('email').valid }" />
              <div *ngIf="form.get('email').invalid && 
                                  form.get('email').errors && 
                                  (form.get('email').dirty || form.get('email').touched)">
                <small class="text-danger" *ngIf="form.get('email').hasError('required')">
                  L'email es obligatori.
                </small>
                <small class="text-danger" *ngIf="form.get('email').hasError('email')">
                  No es un email valid.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputAddress" class="col-sm-3 col-form-label text-sm-end">Domicili</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputAddress" placeholder="Domicili" formControlName="address"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('address').invalid, 'is-valid': form.get('address').valid }" />
              <div *ngIf="form.get('address').invalid && 
                                    form.get('address').errors && 
                                    (form.get('address').dirty || form.get('address').touched)">
                <small class="text-danger" *ngIf="form.get('address').hasError('required')">
                  L'adre√ßa es obligatoria.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="preferredLanguage" class="col-sm-3 col-form-label text-sm-end">Idioma</label>
            <div class="col-sm-8">
              <select id="preferredLanguage" formControlName="preferredLanguage" class="form-select"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('preferredLanguage').invalid, 'is-valid': form.get('preferredLanguage').valid }">
                <option [ngValue]="" disabled>Tria un idioma</option>
                <option *ngFor="let language of selectLanguages" [ngValue]="language">
                  {{language}}
                </option>
              </select>
              <div *ngIf="form.get('preferredLanguage').invalid && 
                                    form.get('preferredLanguage').errors && 
                                    (form.get('preferredLanguage').dirty || form.get('preferredLanguage').touched)">
                <small class="text-danger" *ngIf="form.get('preferredLanguage').hasError('required')">
                  L'idioma es obligatori.
                </small>
              </div>
            </div>
          </div>
          <input type="hidden" formControlName="email" />
          <div class="mt-4 mb-3 row">
            <div class="d-flex justify-content-center">
              <button class="btn btn-dark" [disabled]="form.invalid">Modificar</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
