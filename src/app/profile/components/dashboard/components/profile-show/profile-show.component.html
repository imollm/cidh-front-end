<div id="userprofile-page">
  <div class="container">
    <div class="row">
      <div class="col-sm-10 offset-sm-1 form-content-wrapper">
        <h1 class="form-title h4 m-5 text-center">
          {{ formTitle }}
        </h1>
        <form class="" [formGroup]="form" (ngSubmit)="onSubmit()">
          <div class="mb-3 row">
            <label for="inputName" class="col-sm-3 col-form-label text-sm-end">Nom</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputName" placeholder="Nom" formControlName="firstName"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('firstName').invalid, 'is-valid': form.get('firstName').valid }" />
              <div *ngIf="form.get('firstName').invalid && 
                                  form.get('firstName').errors && 
                                  (form.get('firstName').dirty || form.get('firstName').touched)">
                <small class="text-danger" *ngIf="form.get('firstName').hasError('required')">
                  El nom es obligatori.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputSurname" class="col-sm-3 col-form-label text-sm-end">Cognom</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputSurname" placeholder="Cognom" formControlName="lastName"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('lastName').invalid, 'is-valid': form.get('lastName').valid }" />
              <div *ngIf="form.get('lastName').invalid && 
                                  form.get('lastName').errors && 
                                  (form.get('lastName').dirty || form.get('lastName').touched)">
                <small class="text-danger" *ngIf="form.get('lastName').hasError('required')">
                  El cognom es obligatori.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputFiscalId" class="col-sm-3 col-form-label text-sm-end">Nif</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputFiscalId" placeholder="Nif" formControlName="fiscalId"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('fiscalId').invalid, 'is-valid': form.get('fiscalId').valid }" />
              <div *ngIf="form.get('fiscalId').invalid && 
                                    form.get('fiscalId').errors && 
                                    (form.get('fiscalId').dirty || form.get('fiscalId').touched)">
                <small class="text-danger" *ngIf="form.get('fiscalId').hasError('required')">
                  El id fiscal es obligatori.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputAddress" class="col-sm-3 col-form-label text-sm-end">Domicili</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputAddress" placeholder="Domicili" formControlName="address"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('address').invalid, 'is-valid': form.get('address').valid }" />
              <div *ngIf="form.get('address').invalid && 
                                    form.get('address').errors && 
                                    (form.get('address').dirty || form.get('address').touched)">
                <small class="text-danger" *ngIf="form.get('address').hasError('required')">
                  L'adreça es obligatoria.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="preferredLanguage" class="col-sm-3 col-form-label text-sm-end">Idioma</label>
            <div class="col-sm-8">
              <select id="preferredLanguage" formControlName="preferredLanguage" class="form-select"
                [ngClass]="{ 'is-invalid': !form.pending && form.get('preferredLanguage').invalid, 'is-valid': form.get('preferredLanguage').valid }">
                <option [ngValue]="" disabled>Tria un idioma</option>
                <option *ngFor="let language of selectLanguages" [ngValue]="language">
                  {{language}}
                </option>
              </select>
              <div *ngIf="form.get('preferredLanguage').invalid && 
                                    form.get('preferredLanguage').errors && 
                                    (form.get('preferredLanguage').dirty || form.get('preferredLanguage').touched)">
                <small class="text-danger" *ngIf="form.get('preferredLanguage').hasError('required')">
                  L'idioma es obligatori.
                </small>
              </div>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPass1" class="col-sm-3 col-form-label text-sm-end">Contrasenya</label>
            <div class="col-sm-8">
                <input type="password" class="form-control" id="inputPass1" placeholder="Contrasenya"
                    formControlName="password1"
                    [ngClass]="{ 'is-invalid': !form.pending && form.get('password1').invalid, 'is-valid': form.get('password1').valid }" />
                <div *ngIf="form.get('password1').invalid && 
                    form.get('password1').errors && 
                    (form.get('password1').dirty || form.get('password1').touched)">
                    <small class="text-danger" *ngIf="form.get('password1').hasError('required')">
                        La contrasenya es obligatori.
                    </small>
                    <small class="text-danger" *ngIf="form.get('password1').hasError('minlength')">
                        La longitud mínima son 8 caracters.
                    </small>
                    <small class="text-danger" *ngIf="form.get('password1').hasError('strong')">
                        La constrasenya ha de tenir almmenys una maj. i una min.
                    </small>
                </div>
            </div>
        </div>
        <div class="mb-3 row">
            <label for="inputPass2" class="col-sm-3 col-form-label text-sm-end">Repeteix contrasenya</label>
            <div class="col-sm-8">
                <input type="password" class="form-control" id="inputPass2" placeholder="Contrasenya"
                    formControlName="password2"
                    [ngClass]="{ 'is-invalid': !form.pending && form.get('password2').invalid && !isPwdEquals(), 'is-valid': form.get('password2').valid && isPwdEquals()}" />
                <div *ngIf="form.get('password2').invalid && 
                    form.get('password2').errors && 
                    (form.get('password2').dirty || form.get('password2').touched) || !isPwdEquals()">
                    <small class="text-danger" *ngIf="form.get('password2').hasError('required')">
                        La contrasenya es obligatori.
                    </small>
                    <small class="text-danger" *ngIf="form.get('password2').hasError('minlength')">
                        La longitud mínima son 8 caracters.
                    </small>
                    <small class="text-danger" *ngIf="form.get('password2').hasError('strong')">
                        La constrasenya ha de tenir almmenys una maj. i una min.
                    </small>
                    <small class="text-danger" *ngIf="!isPwdEquals()">
                        Les constrasenyes no son iguals.
                    </small>
                </div>
            </div>
        </div>
          <input type="hidden" formControlName="email" />
          <div class="mt-4 mb-3 row">
            <div class="d-flex justify-content-center">
              <button class="btn btn-dark">Modificar</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
